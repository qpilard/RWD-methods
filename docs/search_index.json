[["index.html", "Methods for the analysis of Real World Data Welcome", " Methods for the analysis of Real World Data Quentin Pilard 2024-11-05 Welcome This book provides a hands-on guide to analyzing Real World Data (RWD) using a motivating example and R code. This book begins with Chapter 1, which provides an overview of Real World Data (RWD), covering key terms, uses in drug development, and challenges related to bias. Following this, a motivating example is introduced in Chapter 2, which will be used throughout the book to illustrate each subsequent chapter with practical R code for reproducibility. The next chapters focus on approaches to limit these inherent biases: Chapter 3 presents the Hernán et al. framework, a key approach to TTE that strengthens the reliability of RWE by addressing biases. Chapter 4 focuses on propensity score techniques aiming to reduce confounding bias at baseline. Chapter 5 examines the clone-censor-weight approach, a method to limit both confounding and immortal bias in the context of time-varying treatments. "],["author.html", "About the author", " About the author Quentin Pilard (pilard.quentin@gmail.com) This tutorial is based on my four years of experience at Quinten Health (Paris) working with RWD in collaboration with pharmaceutical industries and academia "],["introduction.html", "Chapter 1 Introduction 1.1 Definition 1.2 Use of RWD in drug development 1.3 Addressing Challenges with RWD: External Control Arms and Emulation of Trials", " Chapter 1 Introduction 1.1 Definition As defined by the FDA, RWD refers to data relating to patient health status and/or the delivery of health care routinely collected from a variety of sources. Real World Evidence (RWE) is the clinical evidence generated from RWD to inform decision-makers about the use of medical products (Commissioner 2024). 1.2 Use of RWD in drug development In drug development, RWD has traditionally been used in phase IV trials for post-market safety assessments. However, its potential applications extend throughout the entire drug lifecycle (Khosla et al. 2018). This includes: Discovery and Early Development: Purpose: Identify diseases with a high burden on populations and unmet needs. RWE Use: Helps define the target product profile by analyzing disease burden and patient characteristics, guiding the selection of indications and prioritizing development. Phase 1–3 Clinical Trials: Purpose: Design clinical trials and ensure they reflect real-world populations. RWE Use: Provides insights into real-world patient populations and treatment patterns, helping to refine inclusion/exclusion criteria and improve the external validity of trials. Regulatory Approval (Phase 3): Purpose: Obtain marketing authorization for new drugs. RWE Use: Supports clinical trial data by providing additional evidence on real-world safety, efficacy, and patient outcomes, potentially accelerating approval processes. Post-Approval (Phase 4) and Market Access: Purpose: Ensure broad access and reimbursement. RWE Use: Provides evidence on the real-world effectiveness, safety, and cost-effectiveness of the drug compared to standard care, supporting reimbursement decisions and market access strategies. Post-Market Surveillance and Lifecycle Management: Purpose: Monitor long-term safety and maintain market access. RWE Use: Continuously tracks patient outcomes, adherence, and safety data in real-world settings, supporting the long-term value demonstration and label expansion into new populations or indications. 1.3 Addressing Challenges with RWD: External Control Arms and Emulation of Trials While RCTs remain the gold standard for generating unbiased evidence due to their controlled and randomized nature, there are situations where a traditional control group is not available or feasible. In such cases, researchers can resort to two alternative approaches: External Control Arm (ECA) or the Target Trial Emulation (TTE) (Baumfeld Andre et al. 2020; Hernán and Robins 2016). These two methods are illustrated below: FIGURE 1.1: Main study designs using RWD The ECA method involves using historical or real-world data as a comparative baseline, offering a way to evaluate the effectiveness of a treatment in the absence of a control group. Alternatively, the TTE seeks to replicate the design of an RCT as closely as possible, but within the context of RWD. Both methods present viable alternatives, but they come with inherent risks of bias due to the lack of randomization. Common biases include: selection bias, which arises from non-random selection of treatment groups; measurement bias, resulting from inaccuracies in data collection; confounding bias, where external factors influence both treatment and outcome; information bias, stemming from differences in data quality between groups; and immortal time bias, which occurs when there are differences in observation periods for the treatment groups. "],["motivating-example.html", "Chapter 2 Motivating example", " Chapter 2 Motivating example Persistent Depressive Disorder (PDD) is a chronic mood disorder characterized by a consistently low mood that lasts for at least two years, significantly impacting patients’ quality of life. Antidepressants serve as the primary treatment for PDD, aiding in symptom management and reducing the risk of relapse. Among these medications, Sertralex and Duloxyn are frequently prescribed, each operating through distinct mechanisms. In this context, clinicians aim to compare the effectiveness of Sertralex and Duloxyn in prolonging the time to relapse over a maximum follow-up period of one year, which is considered the maximum duration of treatment for patients newly diagnosed with PDD. Given the RWD setting, treatment switches are likely to occur; therefore, switches were evaluated at the six-week mark to determine whether individuals transitioned from Sertralex to Duloxyn or vice versa. To address this, two types of analyses were proposed: one that evaluates the overall treatment effect without considering any changes in therapy during the follow-up period, and another that assesses the treatment effect while accounting for switches identified at the six-week follow-up by censoring at the point of change. Here is the list of variables included in the dataset: ID: Patient identifier AGE: Age at diagnosis (years) GENDER: Gender of the patient [Male; Female] BECK: Beck Depression Inventory score at diagnosis [0-63 (worst prognosis)] SOCIO_ECO: Socioeconomic status [Very low; Low; Moderate; High; Very high] EVENT: Relapse indicator [No relapse; Relapse] TIME_TO_EVENT: Time from diagnosis to event of interest or censoring TREAT: Therapy initiated at diagnosis [Sertralex; Duloxyn]. SWITCH: Indicates if the patient switched to the alternate therapy [No switch; Switched]. Further information on the simulation process to generate these data are described in Appendix A. "],["target-trial-emulation.html", "Chapter 3 Target Trial Emulation using observational data 3.1 Background 3.2 Specify the target trial 3.3 Emulate the target trial", " Chapter 3 Target Trial Emulation using observational data 3.1 Background In 2016, Hernán and Rubins presented a framework to emulate a clinical trial using observational data when no clinical trial exists (Hernán and Robins 2016).The latter is a 2-step process: (1) Specifying the target trial (i.e., which is the hypothetical trial that could have been performed to answer the research question). This includes these elements eligibility criteria, treatment strategies, assignment procedures, follow-up period, outcome, causal contrast of interest and analysis plan, and (2) Emulating each element from the target trial. Let us illustrate the TTE framework using our motivating example. 3.2 Specify the target trial As suggested, we specified the target trial as below: Protocol component Target trial emulation Eligibility criteria Individuals aged 18 or older, newly diagnosed with PDD. Treatment strategies Individuals who initiated Sertralex or Duloxyn. Assignment procedures Individuals randomly assigned to either strategy at baseline and are not aware of the assigned strategy (i.e., blinding) Follow-up period Starts at randomization and ends at the first occurrence of a relapse event, loss to follow-up, or after one year of follow-up, whichever occurs first. Outcome Relapse (defined as a recurrence of depressive disorder) diagnosed by a clinician, identified through clinical assessment or documented diagnosis of depression during the follow-up period. Causal contrasts of interest Intention-to-treat (ITT) Per Protocol (PP) (see Appendix B for causal contrasts of interest defined as suggested in the ICH E9 (R1) addendum) Analysis plan In both analyses (ITT and PP), Kaplan-Meier estimates and Cox proportional hazards models were utilized to compare the time to relapse from randomization between Sertralex and Duloxyn. In the PP analysis, individuals were censored at the time they switched from their initially assigned treatment to the alternative therapy. Additionally, inverse probability weighting was applied to adjust for post-baseline prognostic factors that may influence the switch. 3.3 Emulate the target trial Next, we examined each component and detailed how they can be derived using RWD. Eligibility criteria: We included individuals aged 18 or older who were diagnosed with PDD, so no additional adjustments were necessary. Treatment strategies: We defined two treatment strategies: either Sertralex or Duloxyn as the first prescription following a PDD diagnosis. Assignment procedures: We assumed these two groups were exchangeable at index date conditionally on baseline covariates: Age at index date, gender, Beck score and socioeconomic status. Follow-up periods: We defined time zero as the date of PDD diagnosis. From this point, we followed-up individuals until the earliest of the following events: first clinical relapse, loss of follow-up, 365 days after time zero, or time of treatment switch (for PP analysis only). Outcomes: We assumed the outcome as the first relapse occurring after time zero. Causal contrast of interest: We considered observational analogues of the ITT and PP effect. Analysis plan: For the ITT analysis, we used inverse probability weights (see Chapter 4 for further details) to emulate the randomization process and applied these weights in the outcome analysis, including weighted Kaplan-Meier estimates and Cox proportional hazards models. For the PP analysis, we implemented the Clone-Censor-Weight method (see Chapter 5 for further details) to address both confounding and immortal time bias introduced by accounting for treatment switching in the analysis. "],["iptw-application.html", "Chapter 4 Propensity score methods 4.1 Background 4.2 Identify confounders 4.3 IPTW implementation 4.4 Balance Diagnostics 4.5 Outcome analysis", " Chapter 4 Propensity score methods 4.1 Background The Propensity Score (PS) is utilized to emulate the randomization process, with the goal of balancing the population’s characteristics across the groups of interest. Unlike multivariable regression, which focuses on estimating the effect at the individual level (subject-specific effect), the PS method estimates the effect at the population level (population-average effect). In the context of models with a non-linear link (typically when Odds Ratio [OR] or Hazard Ratio [HR] are reported), these two effects differ (Austin et al. 2007). Statistically, the PS is defined as the conditional probability of receiving the exposure of interest based on observed baseline characteristics. It is typically estimated using multivariable logistic regression, where the exposure of interest serves as the dependent variable and the baseline characteristics act as independent variables. Once calculated, it can be employed in various approaches, including matching, stratification, Inverse Probability of Treatment Weighting (IPTW), and covariate adjustment (Austin 2011). The ITT analysis discussed in Chapter 3 will be applied to illustrate the application of IPTW. 4.2 Identify confounders The baseline characteristics incorporated in the logistic regression must be defined as confounders - variables that influence both treatment assignment and the outcome without being part on the causal pathway. Other types of variables, such as mediators or colliders, may also be present; however, adjusting for these can introduce bias (MacKinnon and Lamp 2021). Directed Acyclic Graphs (DAGs) are usually recommended to depict causal relationships, ideally, clinical experts should be involved in their development as they more likely to know involved clinical pathways, interacting with the disease of interest (Hernan and Robins 2024; Tennant et al. 2021). DAGs can be created using the DAGitty website or dagitty R package. In our example, we identified age at diagnosis, gender, Beck score and socioeconomic status as potential confounders of the association between treatment exposure and relapse. The associated DAG is represented in Appendix C. 4.3 IPTW implementation This code implements the IPTW approach using the stabilized Average Treatment Effect (ATE) estimand (Austin and Stuart 2015), detailed in the following equation: \\[ IPTW_{Stabilized, ATE} = \\frac{X*Pr(X=1)}{e}+\\frac{(1-X)*Pr(X=0)}{1-e} \\] Here, the PS is defined as \\(e = \\Pr ({X}=1|{Z}={z})\\) and \\(X\\) and \\(Z\\) are the treatment status (0 = Sertralex and 1 = Duloxyn) and observed confunders (gender, age, SES level, and Beck score), respectively. This models the treatment effect across the entire population likely to receive either Sertralex or Duloxyn. Additional details on causal estimands (ATE/ATT) are provided in Appendix D. #Perform weighting W &lt;- weightit(TREAT0 ~ AGE + GENDER + SOCIO_ECO + BECK0, data = data, method = &quot;glm&quot;, estimand = &quot;ATE&quot;, stabilize = TRUE) data$weights &lt;- W$weights data$ps &lt;- W$ps 4.4 Balance Diagnostics To evaluate balance after weighting, we applied the typical recommendation by using the Standardized Mean Difference (SMD) and checking whether the difference in SMD is less than 0.1 (Austin 2009; Normand et al. 2001). A difference below this threshold indicates that the characteristics of interest are balanced between the groups. love.plot(W, binary = &quot;std&quot;, thresholds = c(m = .1), sample.names = c(&quot;Before weighting&quot;, &quot;After weighting&quot;)) To summarize, a table before and after weighting is also represented according to treatment status. #Before weighting t1 &lt;- data %&gt;% select(AGE, GENDER, SOCIO_ECO, BECK0, TREAT0) %&gt;% tbl_summary(by = TREAT0, statistic = list(all_continuous() ~ &quot;{mean} ({sd})&quot;), label = list(AGE ~ &quot;Age (at diagnosis)&quot;, GENDER ~ &quot;Gender&quot;, SOCIO_ECO ~ &quot;SES level (1-5)&quot;, BECK0 ~ &quot;Beck score (0-63)&quot;)) %&gt;% add_difference(test = everything() ~ &quot;smd&quot;) %&gt;% add_overall() %&gt;% modify_header(label ~ &quot;**Variable**&quot;, estimate ~ &quot;**SMD**&quot;, stat_0 ~ &quot;**Total**&quot;, stat_1 ~ &quot;**Sertralex**&quot;, stat_2 ~ &quot;**Duloxyn**&quot;) data_selected &lt;- data %&gt;% select(AGE, GENDER, SOCIO_ECO, BECK0, TREAT0) #After weighting data_svy &lt;- svydesign(ids = ~1, data = data_selected, weights = ~W$weights) t2 &lt;- data_svy %&gt;% tbl_svysummary(by = TREAT0, statistic = list(all_continuous() ~ &quot;{mean} ({sd})&quot;), label = list(AGE ~ &quot;Age (at diagnosis)&quot;, GENDER ~ &quot;Gender&quot;, SOCIO_ECO ~ &quot;SES level (1-5)&quot;, BECK0 ~ &quot;Beck score (0-63)&quot;)) %&gt;% add_difference(test = everything() ~ &quot;smd&quot;) %&gt;% add_overall() %&gt;% modify_header(label ~ &quot;**Variable**&quot;, estimate ~ &quot;**SMD**&quot;, stat_0 ~ &quot;**Total**&quot;, stat_1 ~ &quot;**Sertralex**&quot;, stat_2 ~ &quot;**Duloxyn**&quot;) for (int_col in c(&quot;modify_stat_N&quot;, &quot;modify_stat_n&quot;)) { t1$table_styling$header[[int_col]] &lt;- t1$table_styling$header[[int_col]] |&gt; as.numeric() } tbl_merge(tbls = list(t1, t2), tab_spanner = c( paste0(&quot;**Raw (N=&quot;,nrow(data),&quot;)**&quot;), paste0(&quot;**Weighted (ESS=&quot;,round(ESS(W$weights),0),&quot;)**&quot;) ) )%&gt;% modify_table_body(~ .x %&gt;% select(-conf.low_1, -conf.low_2)) #serzlunqcl table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #serzlunqcl thead, #serzlunqcl tbody, #serzlunqcl tfoot, #serzlunqcl tr, #serzlunqcl td, #serzlunqcl th { border-style: none; } #serzlunqcl p { margin: 0; padding: 0; } #serzlunqcl .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #serzlunqcl .gt_caption { padding-top: 4px; padding-bottom: 4px; } #serzlunqcl .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #serzlunqcl .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #serzlunqcl .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #serzlunqcl .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #serzlunqcl .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #serzlunqcl .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #serzlunqcl .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #serzlunqcl .gt_column_spanner_outer:first-child { padding-left: 0; } #serzlunqcl .gt_column_spanner_outer:last-child { padding-right: 0; } #serzlunqcl .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #serzlunqcl .gt_spanner_row { border-bottom-style: hidden; } #serzlunqcl .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #serzlunqcl .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #serzlunqcl .gt_from_md > :first-child { margin-top: 0; } #serzlunqcl .gt_from_md > :last-child { margin-bottom: 0; } #serzlunqcl .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #serzlunqcl .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #serzlunqcl .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #serzlunqcl .gt_row_group_first td { border-top-width: 2px; } #serzlunqcl .gt_row_group_first th { border-top-width: 2px; } #serzlunqcl .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #serzlunqcl .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #serzlunqcl .gt_first_summary_row.thick { border-top-width: 2px; } #serzlunqcl .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #serzlunqcl .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #serzlunqcl .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #serzlunqcl .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #serzlunqcl .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #serzlunqcl .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #serzlunqcl .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #serzlunqcl .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #serzlunqcl .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #serzlunqcl .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #serzlunqcl .gt_left { text-align: left; } #serzlunqcl .gt_center { text-align: center; } #serzlunqcl .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #serzlunqcl .gt_font_normal { font-weight: normal; } #serzlunqcl .gt_font_bold { font-weight: bold; } #serzlunqcl .gt_font_italic { font-style: italic; } #serzlunqcl .gt_super { font-size: 65%; } #serzlunqcl .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #serzlunqcl .gt_asterisk { font-size: 100%; vertical-align: 0; } #serzlunqcl .gt_indent_1 { text-indent: 5px; } #serzlunqcl .gt_indent_2 { text-indent: 10px; } #serzlunqcl .gt_indent_3 { text-indent: 15px; } #serzlunqcl .gt_indent_4 { text-indent: 20px; } #serzlunqcl .gt_indent_5 { text-indent: 25px; } #serzlunqcl .katex-display { display: inline-flex !important; margin-bottom: 0.75em !important; } #serzlunqcl div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after { height: 0px !important; } Variable Raw (N=600) Weighted (ESS=324) Total1 Sertralex1 Duloxyn1 SMD2 Duloxyn1 Total1 Sertralex1 SMD2 Age (at diagnosis) 31.9 (6.1) 32.3 (5.8) 31.5 (6.3) 0.13 31.4 (6.2) 31.5 (6.2) 31.6 (6.1) -0.02 Gender 0.32 0.01     Male 303 (51%) 131 (43%) 172 (59%) 146 (49%) 288 (49%) 142 (49%)     Female 297 (50%) 175 (57%) 122 (41%) 152 (51%) 298 (51%) 146 (51%) SES level (1-5) 0.20 0.10     Very low 111 (19%) 52 (17%) 59 (20%) 57 (19%) 105 (18%) 48 (17%)     Low 108 (18%) 60 (20%) 48 (16%) 48 (16%) 102 (17%) 54 (19%)     Moderate 136 (23%) 66 (22%) 70 (24%) 74 (25%) 139 (24%) 64 (22%)     High 126 (21%) 58 (19%) 68 (23%) 65 (22%) 132 (23%) 68 (24%)     Very high 119 (20%) 70 (23%) 49 (17%) 54 (18%) 108 (18%) 54 (19%) Beck score (0-63) 31 (9) 25 (8) 36 (8) -1.4 30 (9) 31 (9) 31 (9) -0.16 1 Mean (SD); n (%) 2 Standardized Mean Difference After weighting the Beck score remains above the recommended threshold. That is why, we suggest adjusting on it (i.e., doubly robust approach) when the final outcome is modeled (Funk et al. 2011). Next, to ensure that the positivity assumption is met, we plotted the propensity score distributions to assess the degree of overlap between individuals receiving Sertralex and Duloxyn. Our goal is to establish sufficient common support, meaning all subjects have a non-zero probability of receiving either treatment. #Display PS plot1&lt;-ggplot2::ggplot(data, mapping = aes(x = ps))+ ggplot2::geom_density(colour=&quot;red&quot;)+ ggplot2::geom_density(mapping=aes(group = TREAT0, fill = TREAT0),alpha=0.4)+ ggtitle(&quot;Raw&quot;)+ scale_fill_manual(name=&quot;Treatment&quot;,labels=c(&quot;Sertralex&quot;,&quot;Duloxyn&quot;),values=c(&quot;#FFDB6D&quot;,&quot;#00AFBB&quot;))+ xlab(&quot;Propensity Score (PS)&quot;)+ ylab(&quot;Density&quot;)+ xlim(0,1)+ labs(caption=&quot;&quot;)+ theme_minimal() #After weighting plot2&lt;-ggplot2::ggplot(data, mapping = aes(x = ps, weight = weights))+ ggplot2::geom_density(colour=&quot;red&quot;)+ ggplot2::geom_density(mapping=aes(group = TREAT0, fill = TREAT0),alpha=0.4)+ ggtitle(&quot;Weighted&quot;)+ scale_fill_manual(name=&quot;Treatment&quot;,labels=c(&quot;Sertralex&quot;,&quot;Duloxyn&quot;),values=c(&quot;#FFDB6D&quot;,&quot;#00AFBB&quot;))+ xlab(&quot;Propensity Score (PS)&quot;)+ ylab(&quot;Density&quot;)+ xlim(0,1)+ labs(caption=&quot;*the red line indicates the PS distribution for the overall population&quot;)+ theme_minimal() ggarrange(plot1,plot2,common.legend = T) We observed that after weighting the two distributions curves align, indicating the dataset is balanced on average. 4.5 Outcome analysis This section details the outcome analyis. First, unadjusted and weighted Kaplan-Meier curves (Cole and Hernán 2004), stratified on treatment group, are compared. #Implement unadjusted model unadjusted&lt;- survfit(Surv(TIME_TO_EVENT, EVENT)~TREAT0, data = data) #Implement IPTW adjusted model weighted&lt;- survfit(Surv(TIME_TO_EVENT, EVENT)~TREAT0, data = data, weights = weights) #Combine both fit&lt;-list(unadjusted,weighted) # Function to format survival probabilities at a given time point format_survival_prob &lt;- function(surv_object, time_point, treatment_index) { surv_prob &lt;- sprintf(&quot;%.2f&quot;, round(summary(surv_object, times = time_point)$surv[treatment_index], 2)) lower_ci &lt;- sprintf(&quot;%.2f&quot;, round(summary(surv_object, times = time_point)$lower[treatment_index], 2)) upper_ci &lt;- sprintf(&quot;%.2f&quot;, round(summary(surv_object, times = time_point)$upper[treatment_index], 2)) return(paste0(surv_prob, &quot; [&quot;, lower_ci, &quot;; &quot;, upper_ci, &quot;]&quot;)) } # Usage for raw and IPTW survival probabilities at week 26 unadjusted_treatment_0 &lt;- format_survival_prob(unadjusted, 26, 1) unadjusted_treatment_1 &lt;- format_survival_prob(unadjusted, 26, 2) weighted_treatment_0 &lt;- format_survival_prob(weighted, 26, 1) weighted_treatment_1 &lt;- format_survival_prob(weighted, 26, 2) ggsurvplot_combine(fit, data = data, legend.title = &quot;&quot;, legend.labs = c(&quot;Unadjusted: Sertralex&quot;, &quot;Unadjusted: Duloxyn&quot;, &quot;Weighted: Sertralex&quot;, &quot;Weighted: Duloxyn&quot;), palette = c(&quot;#ff331a&quot;,&quot;#ff80a6&quot;,&quot;#FFDB6D&quot;,&quot;#27d4ad&quot;), conf.int = TRUE, xlab = &quot;Time (in weeks)&quot;, ggtheme = theme_bw()) As outlined, differences in time to relapse vary depending on the analysis and treatment group considered. In the unadjusted analysis, we observed a survival probability of 0.82 [0.77; 0.89] for Sertralex, compared to 0.69 [0.63; 0.77] for Duloxyn. In the weighted analysis (where weights are used to create a pseudo population), these differences were reduced, with survival probabilities of 0.72 [0.63; 0.83] for Sertralex and 0.79 [0.73; 0.85] for Duloxyn. Second, unadjusted, multivariable, and weighted Cox are displayed. # Fit the Cox models unadjusted &lt;- coxph(Surv(TIME_TO_EVENT, EVENT) ~ TREAT0, data = data) multivariable &lt;- coxph(Surv(TIME_TO_EVENT, EVENT) ~ TREAT0 + AGE + GENDER + SOCIO_ECO + BECK0, data = data) weighted &lt;- coxph(Surv(TIME_TO_EVENT, EVENT) ~ TREAT0 + BECK0, weights = weights, data = data) # Create regression tables unadjusted_table &lt;- unadjusted %&gt;% tbl_regression(exponentiate = TRUE, label = list(TREAT0 ~ &quot;Treatment (unadjusted)&quot;)) multivariable_table &lt;- multivariable %&gt;% tbl_regression(exponentiate = TRUE, label = list(TREAT0 ~ &quot;Treatment (multivariable regression)&quot;))%&gt;% modify_table_body( ~ .x %&gt;% dplyr::filter(variable == &quot;TREAT0&quot;) ) weighted_table &lt;- weighted %&gt;% tbl_regression(exponentiate = TRUE, label = list(TREAT0 ~ &quot;Treatment (weighted)&quot;))%&gt;% modify_table_body( ~ .x %&gt;% dplyr::filter(variable == &quot;TREAT0&quot;) ) # Function to extract HR and CI for a specific variable extract_hr_ci &lt;- function(model) { conf &lt;- confint(model) hr &lt;- sprintf(&quot;%.2f&quot;, exp(model$coefficients)[1]) ci_lower &lt;- sprintf(&quot;%.2f&quot;, exp(conf)[1,1]) ci_upper &lt;- sprintf(&quot;%.2f&quot;, exp(conf)[1,2]) return(paste0(&quot;HR = &quot;, hr, &quot; [&quot;, ci_lower, &quot;; &quot;, ci_upper, &quot;]&quot;)) } # Extract and format HR and CI for TREAT0 unadjusted_hr_ci &lt;- extract_hr_ci(unadjusted) multivariable_hr_ci &lt;- extract_hr_ci(multivariable) weighted_hr_ci &lt;- extract_hr_ci(weighted) # Stack the regression tables tbl_stack(list(unadjusted_table, multivariable_table, weighted_table)) #wmilxxvlav table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #wmilxxvlav thead, #wmilxxvlav tbody, #wmilxxvlav tfoot, #wmilxxvlav tr, #wmilxxvlav td, #wmilxxvlav th { border-style: none; } #wmilxxvlav p { margin: 0; padding: 0; } #wmilxxvlav .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #wmilxxvlav .gt_caption { padding-top: 4px; padding-bottom: 4px; } #wmilxxvlav .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #wmilxxvlav .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #wmilxxvlav .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #wmilxxvlav .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #wmilxxvlav .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #wmilxxvlav .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #wmilxxvlav .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #wmilxxvlav .gt_column_spanner_outer:first-child { padding-left: 0; } #wmilxxvlav .gt_column_spanner_outer:last-child { padding-right: 0; } #wmilxxvlav .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #wmilxxvlav .gt_spanner_row { border-bottom-style: hidden; } #wmilxxvlav .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #wmilxxvlav .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #wmilxxvlav .gt_from_md > :first-child { margin-top: 0; } #wmilxxvlav .gt_from_md > :last-child { margin-bottom: 0; } #wmilxxvlav .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #wmilxxvlav .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #wmilxxvlav .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #wmilxxvlav .gt_row_group_first td { border-top-width: 2px; } #wmilxxvlav .gt_row_group_first th { border-top-width: 2px; } #wmilxxvlav .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #wmilxxvlav .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #wmilxxvlav .gt_first_summary_row.thick { border-top-width: 2px; } #wmilxxvlav .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #wmilxxvlav .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #wmilxxvlav .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #wmilxxvlav .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #wmilxxvlav .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #wmilxxvlav .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #wmilxxvlav .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #wmilxxvlav .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #wmilxxvlav .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #wmilxxvlav .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #wmilxxvlav .gt_left { text-align: left; } #wmilxxvlav .gt_center { text-align: center; } #wmilxxvlav .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #wmilxxvlav .gt_font_normal { font-weight: normal; } #wmilxxvlav .gt_font_bold { font-weight: bold; } #wmilxxvlav .gt_font_italic { font-style: italic; } #wmilxxvlav .gt_super { font-size: 65%; } #wmilxxvlav .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #wmilxxvlav .gt_asterisk { font-size: 100%; vertical-align: 0; } #wmilxxvlav .gt_indent_1 { text-indent: 5px; } #wmilxxvlav .gt_indent_2 { text-indent: 10px; } #wmilxxvlav .gt_indent_3 { text-indent: 15px; } #wmilxxvlav .gt_indent_4 { text-indent: 20px; } #wmilxxvlav .gt_indent_5 { text-indent: 25px; } #wmilxxvlav .katex-display { display: inline-flex !important; margin-bottom: 0.75em !important; } #wmilxxvlav div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after { height: 0px !important; } Characteristic HR1 95% CI1 p-value Treatment (unadjusted)     Sertralex — —     Duloxyn 2.11 1.40, 3.18 Treatment (multivariable regression)     Sertralex — —     Duloxyn 0.77 0.46, 1.29 0.3 Treatment (weighted)     Sertralex — —     Duloxyn 0.70 0.38, 1.29 0.3 1 HR = Hazard Ratio, CI = Confidence Interval As shown, the treatment effect varies depending on the analysis and treatment group considered. In the raw analysis, the HR = 2.11 [1.40; 3.18], suggesting that Duloxyn significantly increases the risk of relapse. Conversely, the multivariate model and IPTW analyses yielded an HR = 0.77 [0.46; 1.29], and HR = 0.70 [0.38; 1.29], respectively, indicating a trend toward Duloxyn having a protective effect by prolonging the time to relapse, although these results were not statistically significant. Lastly, the slight differences between the multivariate and IPTW models highlight that conditional and marginal effects are not equivalent. "],["clone-censor-weight.html", "Chapter 5 Clone-Censor-Weight method 5.1 Background 5.2 Implement CCW", " Chapter 5 Clone-Censor-Weight method 5.1 Background In addition to the confounding often present in RWD, another challenge is immortal time bias, which typically arises when there is a delay between the start of follow-up (time zero) and the initiation of treatment. To address both confounding and immortal time bias, the Clone-Censor-Weight (CCW) approach was introduced (Hernán et al. 2016; Maringe et al. 2020). Zhao et al. further categorized three common scenarios where CCW is applicable: grace periods, static time-related strategies, and dynamic strategies (Zhao, Lyu, and Yoshida 2021). The PP analysis discussed in Chapter 3 will be applied to illustrate the application of CCW approach. This will involve examining treatment exposure during two distinct periods: before and after week 6, where treatment switches are documented. 5.2 Implement CCW "],["references.html", "References", " References Austin, Peter C. 2009. “Balance Diagnostics for Comparing the Distribution of Baseline Covariates Between Treatment Groups in Propensity-Score Matched Samples.” Statistics in Medicine 28 (25): 3083. https://doi.org/10.1002/sim.3697. ———. 2011. “An Introduction to Propensity Score Methods for Reducing the Effects of Confounding in Observational Studies.” Multivariate Behavioral Research 46 (3): 399. https://doi.org/10.1080/00273171.2011.568786. Austin, Peter C., Paul Grootendorst, Sharon-Lise T. Normand, and Geoffrey M. Anderson. 2007. “Conditioning on the Propensity Score Can Result in Biased Estimation of Common Measures of Treatment Effect: A Monte Carlo Study.” Statistics in Medicine 26 (4): 754–68. https://doi.org/10.1002/sim.2618. Austin, Peter C., and Elizabeth A. Stuart. 2015. “Moving Towards Best Practice When Using Inverse Probability of Treatment Weighting (IPTW) Using the Propensity Score to Estimate Causal Treatment Effects in Observational Studies.” Statistics in Medicine 34 (28): 3661–79. https://doi.org/10.1002/sim.6607. Baumfeld Andre, Elodie, Robert Reynolds, Patrick Caubel, Laurent Azoulay, and Nancy A. Dreyer. 2020. “Trial Designs Using Real-World Data: The Changing Landscape of the Regulatory Approval Process.” Pharmacoepidemiology and Drug Safety 29 (10): 1201–12. https://doi.org/10.1002/pds.4932. Cole, Stephen R., and Miguel A. Hernán. 2004. “Adjusted Survival Curves with Inverse Probability Weights.” Computer Methods and Programs in Biomedicine 75 (1): 45–49. https://doi.org/10.1016/j.cmpb.2003.10.004. Commissioner, Office of the. 2024. “Real-World Evidence. FDA.” September 19, 2024. https://www.fda.gov/science-research/science-and-research-special-topics/real-world-evidence. Funk, Michele Jonsson, Daniel Westreich, Chris Wiesen, Til Stürmer, M. Alan Brookhart, and Marie Davidian. 2011. “Doubly Robust Estimation of Causal Effects.” American Journal of Epidemiology 173 (7): 761. https://doi.org/10.1093/aje/kwq439. Greifer, Noah, and Elizabeth A. Stuart. 2023. “Choosing the Causal Estimand for Propensity Score Analysis of Observational Studies.” arXiv. https://doi.org/10.48550/arXiv.2106.10577. Heiss, Andrew. n.d. “Demystifying Causal Inference Estimands: ATE, ATT, and ATU. Andrew Heiss.” Accessed November 4, 2024. https://www.andrewheiss.com/blog/2024/03/21/demystifying-ate-att-atu/. Hernan, Miguel A, and James M Robins. 2024. “Causal Inference: What If,” January. Hernán, Miguel A., and James M. Robins. 2016. “Using Big Data to Emulate a Target Trial When a Randomized Trial Is Not Available.” American Journal of Epidemiology 183 (8): 758–64. https://doi.org/10.1093/aje/kwv254. Hernán, Miguel A., Brian C. Sauer, Sonia Hernández-Díaz, Robert Platt, and Ian Shrier. 2016. “Specifying a Target Trial Prevents Immortal Time Bias and Other Self-Inflicted Injuries in Observational Analyses.” Journal of Clinical Epidemiology 79 (November): 70–75. https://doi.org/10.1016/j.jclinepi.2016.04.014. “ICH E9 R1 Addendum.” 2020. July 30, 2020. https://www.ema.europa.eu/en/ich-e9-statistical-principles-clinical-trials-scientific-guideline. Khosla, Sajan, Robert White, Jesús Medina, Mario Ouwens, Cathy Emmas, Tim Koder, Gary Male, and Sandra Leonard. 2018. “Real World Evidence (RWE) – a Disruptive Innovation or the Quiet Evolution of Medical Evidence Generation?” F1000Research 7 (August): 111. https://doi.org/10.12688/f1000research.13585.2. Lawrance, Rachael, Evgeny Degtyarev, Philip Griffiths, Peter Trask, Helen Lau, Denise D’Alessio, Ingolf Griebsch, Gudrun Wallenstein, Kim Cocks, and Kaspar Rufibach. 2020. “What Is an Estimand &amp; How Does It Relate to Quantifying the Effect of Treatment on Patient-Reported Quality of Life Outcomes in Clinical Trials?” Journal of Patient-Reported Outcomes 4 (1): 68. https://doi.org/10.1186/s41687-020-00218-5. MacKinnon, David P., and Sophia J. Lamp. 2021. “A Unification of Mediator, Confounder, and Collider Effects.” Prevention Science : The Official Journal of the Society for Prevention Research 22 (8): 1185. https://doi.org/10.1007/s11121-021-01268-x. Maringe, Camille, Sara Benitez Majano, Aimilia Exarchakou, Matthew Smith, Bernard Rachet, Aurélien Belot, and Clémence Leyrat. 2020. “Reflection on Modern Methods: Trial Emulation in the Presence of Immortal-Time Bias. Assessing the Benefit of Major Surgery for Elderly Lung Cancer Patients Using Observational Data.” International Journal of Epidemiology 49 (5): 1719. https://doi.org/10.1093/ije/dyaa057. Normand, S. T., M. B. Landrum, E. Guadagnoli, J. Z. Ayanian, T. J. Ryan, P. D. Cleary, and B. J. McNeil. 2001. “Validating Recommendations for Coronary Angiography Following Acute Myocardial Infarction in the Elderly: A Matched Analysis Using Propensity Scores.” Journal of Clinical Epidemiology 54 (4): 387–98. https://doi.org/10.1016/s0895-4356(00)00321-8. Tennant, Peter W G, Eleanor J Murray, Kellyn F Arnold, Laurie Berrie, Matthew P Fox, Sarah C Gadd, Wendy J Harrison, et al. 2021. “Use of Directed Acyclic Graphs (DAGs) to Identify Confounders in Applied Health Research: Review and Recommendations.” International Journal of Epidemiology 50 (2): 620–32. https://doi.org/10.1093/ije/dyaa213. Zhao, Sizheng Steven, Houchen Lyu, and Kazuki Yoshida. 2021. “Versatility of the Clone-Censor-Weight Approach: Response to ‘Trial Emulation in the Presence of Immortal-Time Bias’.” International Journal of Epidemiology 50 (2): 694–95. https://doi.org/10.1093/ije/dyaa223. "],["r-code.html", "Appendix A R code of the simulated dataset", " Appendix A R code of the simulated dataset This is the R code to reproduce the motivating example: set.seed(42) # Ensure reproducibility # Number of patients N &lt;- 600 # Patient IDs ID &lt;- 1:N # Generation of base variables AGE &lt;- pmax(pmin(round(rnorm(N, mean = 32, sd = 6.19)), 80), 18) GENDER &lt;- sample(0:1, N, replace = TRUE) SOCIO_ECO &lt;- sample(1:5, N, replace = TRUE) SOCIO_ECO_2 &lt;- as.numeric(SOCIO_ECO == 2) SOCIO_ECO_3 &lt;- as.numeric(SOCIO_ECO == 3) SOCIO_ECO_4 &lt;- as.numeric(SOCIO_ECO == 4) SOCIO_ECO_5 &lt;- as.numeric(SOCIO_ECO == 5) # Generation of BECK score at diagnosis (BECK0) BECK0 &lt;- pmax(pmin(round(rnorm(N, mean = 30, sd = 9.33)), 63), 0) # Utility function to generate binary variables based on a logistic model logit_prob &lt;- function(eta) { 1 / (1 + exp(-eta)) } # Coefficients for predictors coefficients &lt;- list( intercept = -5, age = -0.04, gender = -0.3, beck0 = 0.2, socio_eco_2 = -0.2, socio_eco_3 = -0.1, socio_eco_4 = 0.1, socio_eco_5 = 0.3) # Generation of initial treatment (TREAT0) eta_treat0 &lt;- coefficients$intercept + coefficients$age * AGE + coefficients$gender * GENDER + coefficients$beck0 * BECK0 + coefficients$socio_eco_2 * SOCIO_ECO_2 + coefficients$socio_eco_3 * SOCIO_ECO_3 + coefficients$socio_eco_4 * SOCIO_ECO_4 + coefficients$socio_eco_5 * SOCIO_ECO_5 TREAT0 &lt;- rbinom(N, 1, logit_prob(eta_treat0 + rnorm(N))) # Generation of BECK score after six weeks (BECK6) coefficients &lt;- list( intercept = -7, age = -0.05, gender = -0.1, socio_eco_2 = -0.2, socio_eco_3 = -0.1, socio_eco_4 = 0.1, socio_eco_5 = 0.3, beck0 = 0.25, treat0 = -3 ) eta_beck6 &lt;- coefficients$intercept + coefficients$age * AGE + coefficients$gender * GENDER + coefficients$socio_eco_2 * SOCIO_ECO_2 + coefficients$socio_eco_3 * SOCIO_ECO_3 + coefficients$socio_eco_4 * SOCIO_ECO_4 + coefficients$socio_eco_5 * SOCIO_ECO_5 + coefficients$beck0 * BECK0 + coefficients$treat0 * TREAT0 BECK6 &lt;- pmax(pmin(round(rnorm(N, mean = BECK0 + eta_beck6 + rnorm(N), sd = 9.33)), 63), 0) # Generation of change indicator (CHANGE_BECK) and switch at 6 weeks (SWITCH) CLINICAL_CHANGE_BECK &lt;- ifelse(((BECK6 - BECK0)/(BECK0)*100) &gt; -20, 1, 0) # Generation of the switch variable with condition coefficients &lt;- list( intercept = -3, age = -0.01, gender = -0.05, socio_eco_2 = -0.05, socio_eco_3 = -0.02, socio_eco_4 = 0.02, socio_eco_5 = 0.05, treat0 = -0.5, clinical_change_beck = 2 ) # Define eta_switch based on achieving the clinical change eta_switch &lt;- coefficients$intercept + coefficients$age * AGE + coefficients$gender * GENDER + coefficients$treat0 * TREAT0 + coefficients$clinical_change_beck * (1 - CLINICAL_CHANGE_BECK) + coefficients$socio_eco_2 * SOCIO_ECO_2 + coefficients$socio_eco_3 * SOCIO_ECO_3 + coefficients$socio_eco_4 * SOCIO_ECO_4 + coefficients$socio_eco_5 * SOCIO_ECO_5 + rnorm(N) # Generate the switch variable ensuring it cannot switch before week 6 SWITCH &lt;- ifelse(CLINICAL_CHANGE_BECK == 1, rbinom(N, 1, logit_prob(eta_switch)), 0) # Generation of relapse (EVENT) and time until relapse (TIME_TO_EVENT) base_hazard &lt;- 0.0005 EVENT &lt;- numeric(N) TIME_TO_EVENT &lt;- numeric(N) max_follow_up &lt;- 52 # Maximum follow-up duration in weeks coefficients &lt;- list( intercept = -4, age = 0.01, gender = 0.1, socio_eco_2 = 0.05, socio_eco_3 = 0.02, socio_eco_4 = -0.03, socio_eco_5 = -0.08, beck0 = 0.2, treat0 = -0.5, clinical_change_beck = -1.5, switch = 0.3 ) for (i in 1:N) { eta_event &lt;- coefficients$intercept + coefficients$age * AGE[i] + coefficients$gender * GENDER[i] + coefficients$beck0 * BECK0[i] + coefficients$socio_eco_2 * SOCIO_ECO_2[i] + coefficients$socio_eco_3 * SOCIO_ECO_3[i] + coefficients$socio_eco_4 * SOCIO_ECO_4[i] + coefficients$socio_eco_5 * SOCIO_ECO_5[i] + coefficients$treat0 * TREAT0[i] + coefficients$clinical_change_beck * CLINICAL_CHANGE_BECK[i] + coefficients$switch * SWITCH[i] + rnorm(1) adjusted_hazard &lt;- base_hazard * exp(eta_event) # Generate time to event after week 6 TIME_TO_EVENT[i] &lt;- ifelse(SWITCH[i] == 1, round(rexp(1, rate = adjusted_hazard), 0) + 6, round(rexp(1, rate = adjusted_hazard), 0) + 1) # Ensure EVENT only occurs after week 6 EVENT[i] &lt;- as.integer(TIME_TO_EVENT[i] &lt;= max_follow_up &amp; TIME_TO_EVENT[i] &gt; 6) # Set TIME_TO_EVENT to max_follow_up if EVENT does not occur TIME_TO_EVENT[i] &lt;- ifelse(EVENT[i] == 1, TIME_TO_EVENT[i], max_follow_up) } # Censoring management censoring_rate &lt;- 0.05 # Censoring rate CENSORING_TIME &lt;- round(rexp(N, rate = -log(1 - censoring_rate)), 0) + 1 # Censoring time CENSORING_TIME[CENSORING_TIME &gt; max_follow_up] &lt;- max_follow_up # Limit to maximum # Adjust TIME_TO_EVENT based on censored data TIME_TO_EVENT &lt;- pmin(TIME_TO_EVENT, CENSORING_TIME) # Verify that SWITCH is consistent with TIME_TO_EVENT TIME_TO_EVENT &lt;- ifelse(SWITCH == 1 &amp; TIME_TO_EVENT &lt; 6, TIME_TO_EVENT + 6, TIME_TO_EVENT) # Organize data in a data frame data &lt;- data.frame(ID, AGE, GENDER, SOCIO_ECO, BECK0, BECK6, TREAT0, SWITCH, EVENT, TIME_TO_EVENT) data$GENDER &lt;- as.factor(data$GENDER) data$SOCIO_ECO &lt;- as.factor(data$SOCIO_ECO) data$TREAT0 &lt;- as.factor(data$TREAT0) data$SWITCH &lt;- as.factor(data$SWITCH) "],["ich.html", "Appendix B ICH E9 (R1) addendum", " Appendix B ICH E9 (R1) addendum In 2020, the International Council for Harmonisation of Technical Requirements for Pharmaceuticals for Human Use (ICH) released the E9 (R1) addendum, which aims to guide practice regarding estimands and sensitivity analyses in clinical trials, moving beyond traditional ITT and PP analyses (“ICH E9 R1 Addendum” 2020). An estimand provides a clear definition of the treatment effect that reflects the clinical question posed by a specific trial objective. Its formulation is based on five attributes: treatment, population, variable of interest (endpoint), intercurrent event handling, and summary measure. The concept of intercurrent events, introduced in this framework, refers to events occurring after treatment initiation. Various strategies exist for handling intercurrent events, including treatment policy, while on treatment, hypothetical, and composite approaches (Lawrance et al. 2020). In our example, we reformulate the ITT and PP questions as suggested in the framework: ITT: “In patients diagnosed with Persistent Depressive Disorder (PDD), what is the effect of Duloxyn compared to Sertralex on the time to relapse from treatment randomization, after one year of follow-up, or until death occurs (whichever comes first), regardless of study treatment discontinuation?” (treatment policy approach) PP: “In patients diagnosed with PDD, what is the effect of Duloxyn compared to Sertralex on the time to relapse from treatment randomization, after one year of follow-up, or until death occurs (whichever comes first), while accounting for potential treatment switches between the two drugs until week 6, irrespective of study treatment discontinuation?” (composite approach) "],["dag.html", "Appendix C DAG of the simulated dataset", " Appendix C DAG of the simulated dataset This is the DAG associated with the simulation process: For simplicity, Z represents the confounders measured at baseline, which include age, gender, socioeconomic status, and the Beck score. The Beck score measured at week 6 is included as it serves as a prognostic variable for determining both the switch and relapse. "],["causal.html", "Appendix D Causal inference estimand", " Appendix D Causal inference estimand A causal estimand is a description of the quantity that is to be estimated. In the context of RWD, methods such as matching or weighting imply the selection of an estimand. Among these, two estimands are typically of interest: the average treatment effect in the treated (ATT) and the average treatment effect in the population (ATE). The ATT is considered when assessing the effect of a treatment among individuals who are likely to receive it (e.g., when comparing a new drug to a placebo or standard of care). In our example, the research question would be framed as: what is the treatment effect among patients likely to receive Duloxyn? This includes individuals with characteristics similar to those receiving Sertralex, while individuals with characteristics unique to Duloxyn would be excluded from the analysis. This estimator typically involves pair matching statistical methods (Greifer and Stuart 2023; Heiss n.d.). "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
